(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{36:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),s=n(20),i=n.n(s),o=(n(46),n(47),n(14)),u=n(13),l=n(3),j=n.n(l),d=n(6),b="REGISTER_SUCCESS",p="REGISTER_FAIL",m="TOKEN_LOADED",f="AUTH_ERROR",h="LOGIN_SUCCESS",O="LOGIN_ERROR",x="LOGOUT",g="IMGURI",v="UPLOAD_ERROR",y="LOAD_IMAGE",w="ERR_LOAD_IMG",N=n(15),k=n.n(N),S=function(e){e?k.a.defaults.headers.common.Authorization=e:delete k.a.defaults.headers.common.Authorization},E=function(){return function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/loadimage");case 3:n=e.sent,t({type:y,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:w});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},A=function(){return function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=localStorage.getItem("token"))?(S(n),t({type:m,payload:n})):t({type:f});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=n(7);n(70);var I=Object(C.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e({type:x})}}})((function(e){var t=e.auth,n=t.isAuthenticated,r=t.loading,s=e.logout,i=Object(c.useState)(!1),l=Object(o.a)(i,2),j=l[0],d=l[1],b=Object(c.useState)(!0),p=Object(o.a)(b,2),m=(p[0],p[1]),f=function(){return d(!1)},h=function(){window.innerWidth<=960?m(!1):m(!0)},O=Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(u.b,{to:"/register",className:"nav-links",onClick:f,style:{textDecoration:"none"},children:"Register"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(u.b,{to:"/login",className:"nav-links",style:{textDecoration:"none"},onClick:f,children:"Login"})})]}),x=Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(u.b,{to:"/upload",className:"nav-links",style:{textDecoration:"none"},onClick:f,children:"Upload"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(u.b,{to:"/display",className:"nav-links",style:{textDecoration:"none"},onClick:function(){f()},children:"Uploaded Pic"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{className:"nav-links",style:{textDecoration:"none"},onClick:function(){f(),s()},children:"Logout"})})]});return Object(c.useEffect)((function(){h()}),[]),window.addEventListener("resize",h),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("nav",{className:"navbar",children:Object(a.jsxs)("div",{className:"navbar-container",children:[Object(a.jsx)("div",{className:"navbar-logo",onClick:f,children:"MRay"}),Object(a.jsx)("div",{className:"menu-icon",onClick:function(){return d(!j)},children:Object(a.jsx)("i",{className:j?"fas fa-times":"fas fa-bars"})}),Object(a.jsx)("ul",{className:j?"nav-menu active":"nav-menu",children:!r&&Object(a.jsx)(c.Fragment,{children:n?x:O})})]})})})})),R=n(5),F=n(18),D=n(4),L=(n(36),Object(C.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(a){var c,r,s,i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{"Content-Type":"Application/json"}},r={email:e,password:t},n.prev=2,n.next=5,k.a.post("/login",r,c);case 5:s=n.sent,a({type:h,payload:s.data}),a(A()),a(E()),n.next=17;break;case 11:n.prev=11,n.t0=n.catch(2),i=n.t0.response.data.error,console.log(i),i&&i.forEach((function(e){})),a({type:O});case 17:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.isAuthenticated,n=e.login,r=Object(c.useState)({email:"",password:""}),s=Object(o.a)(r,2),i=s[0],u=s[1],l=i.email,b=i.password,p=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(Object(D.a)(Object(D.a)({},i),{},Object(F.a)({},t.target.name,t.target.value)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n(l,b);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?Object(a.jsx)(R.a,{to:"/upload"}):Object(a.jsxs)("form",{className:"formLabel",onSubmit:function(e){m(e)},children:[Object(a.jsx)("h3",{children:"Sign In"}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Email address"}),Object(a.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",name:"email",value:l,onChange:function(e){return p(e)},required:!0})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Password"}),Object(a.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",name:"password",value:b,onChange:function(e){p(e)}})]}),Object(a.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Sign In"})]})}))),T=(n(72),Object(C.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{register:function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(a){var c,r,s,i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{"Content-Type":"application/json"}},r={email:e,password:t},n.prev=2,n.next=5,k.a.post("/register",r,c);case 5:s=n.sent,console.log(s),a({type:b,payload:s.data}),a(A()),n.next=16;break;case 11:n.prev=11,n.t0=n.catch(2),(i=n.t0.response.data.errors)&&i.forEach((function(e){})),a({type:p});case 16:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.isAuthenticated,n=e.register,r=Object(c.useState)({email:"",password:""}),s=Object(o.a)(r,2),i=s[0],u=s[1],l=i.email,b=i.password,p=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(Object(D.a)(Object(D.a)({},i),{},Object(F.a)({},t.target.name,t.target.value)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n(l,b);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?Object(a.jsx)(R.a,{to:"/upload"}):Object(a.jsxs)("form",{className:"formLabel",onSubmit:function(e){return m(e)},children:[Object(a.jsx)("h3",{children:"Sign Up"}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Email address"}),Object(a.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",name:"email",value:l,onChange:function(e){return p(e)}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Password"}),Object(a.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",name:"password",value:b,onChange:function(e){return p(e)}})]}),Object(a.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Sign Up"}),Object(a.jsxs)("p",{className:"forgot-password text-right",children:["Already registered ",Object(a.jsx)("a",{href:"/login",children:"sign in?"})]})]})}))),U=Object(C.b)((function(e){return{imguri:e.upload.imguri}}),{uploadImage:function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){var a,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-Type":"multipart/form-data"}},t.prev=1,t.next=4,k.a.post("/upload",e,a);case 4:c=t.sent,n({type:g,payload:c.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:v});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.imguri,n=e.uploadImage,r=Object(c.useState)(""),s=Object(o.a)(r,2),i=s[0],u=s[1],l=Object(c.useState)("Choose File"),b=Object(o.a)(l,2),p=b[0],m=b[1],f=Object(c.useState)({}),h=Object(o.a)(f,2),O=h[0],x=(h[1],function(){var e=Object(d.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(a=new FormData).append("file",i),a.append("filename",p),n(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return null!==t?Object(a.jsx)(R.a,{to:"/uploadedpic"}):Object(a.jsxs)(c.Fragment,{children:[Object(a.jsxs)("form",{onSubmit:x,className:"formLabel",children:[Object(a.jsxs)("div",{className:"custom-file mb-4",children:[Object(a.jsx)("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:function(e){u(e.target.files[0]),m(e.target.files[0].name)}}),Object(a.jsx)("label",{className:"custom-file-label",htmlFor:"customFile",children:p})]}),Object(a.jsx)("input",{type:"submit",value:"Upload",className:"btn btn-primary btn-block mt-4"})]}),O?Object(a.jsx)("div",{className:"row mt-5",children:Object(a.jsxs)("div",{className:"col-md-6 m-auto",children:[Object(a.jsx)("h3",{className:"text-center",children:O.fileName}),Object(a.jsx)("img",{style:{width:"100%"},src:O.filePath,alt:""})]})}):null]})})),_=n(40),G=n(16),P=n.n(G),M={token:localStorage.getItem("token"),loading:!0,isAuthenticated:!1},z=function(e){var t=e.component,n=e.auth,c=n.isAuthenticated,r=n.loading,s=Object(_.a)(e,["component","auth"]);return Object(a.jsx)(R.b,Object(D.a)(Object(D.a)({},s),{},{render:function(e){return c||r?Object(a.jsx)(t,Object(D.a)({},e)):Object(a.jsx)(R.a,{to:"/login"})}}))};z.prototype={auth:P.a.object.isRequired};var q=Object(C.b)((function(e){return{auth:e.auth}}))(z);n(73);var B=Object(C.b)((function(e){return{imguri:e.upload.imguri}}),{loadImage:E})((function(e){e.loadImage;var t=e.imguri,n="http://127.0.0.1:5000/static/images/"+"".concat(t);return Object(a.jsx)(c.Fragment,{children:Object(a.jsx)("main",{children:Object(a.jsx)("img",{src:n})})})})),J=n(17),W=n(38),H=n(39),K={imguri:null},Q=Object(J.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case m:return Object(D.a)(Object(D.a)({},e),{},{token:a,isAuthenticated:!0,loading:!1});case b:case h:return localStorage.setItem("token",a.msg),Object(D.a)(Object(D.a)({},e),{},{token:a.msg,isAuthenticated:!0,loading:!1});case f:case p:case O:case x:return localStorage.removeItem("token"),Object(D.a)(Object(D.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1});default:return e}},upload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case y:case g:return Object(D.a)(Object(D.a)({},e),{},{imguri:a.msg});case w:case v:case x:return Object(D.a)(Object(D.a)({},e),{},{imguri:null});default:return e}}}),V=[H.a],X=Object(W.composeWithDevTools)(J.applyMiddleware.apply(void 0,V)),Y=Object(J.createStore)(Q,{},X);var Z=function(){return Object(c.useEffect)((function(){Y.dispatch(A()),Y.dispatch(E())}),[]),Object(a.jsx)(C.a,{store:Y,children:Object(a.jsx)(c.Fragment,{children:Object(a.jsxs)(u.a,{children:[Object(a.jsx)(I,{}),Object(a.jsxs)(R.d,{children:[Object(a.jsx)(R.b,{path:"/register",component:T,exact:!0}),Object(a.jsx)(R.b,{path:"/login",component:L}),Object(a.jsx)(q,{path:"/upload",component:U}),Object(a.jsx)(q,{path:"/uploadedpic",component:B}),Object(a.jsx)(R.b,{render:function(){return Object(a.jsx)(R.a,{to:"/login"})}})]})]})})})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Z,{})}),document.getElementById("root")),$()}},[[74,1,2]]]);
//# sourceMappingURL=main.38e5e5ff.chunk.js.map